var GameTabType,ThirdPartyGameHall;(function(n){n[n.All=1]="All";n[n.Hot=2]="Hot";n[n.Favorite=3]="Favorite"})(GameTabType||(GameTabType={}));ThirdPartyGameHall=function(){function n(n,t){var i=this;this.thirdPartyCode=n;this.bodyClass=t;this.gameTabType=GameTabType.All;this.searchGames=function(n){n===void 0&&(n=1);var t=$.toTokenPath(globalVariables.GetUrl("GameLobby/Get".concat(i.thirdPartyCode,"GameList?"))),r=$.trim(i.$searchName.val());t=i.gameTabType===GameTabType.Favorite?t+$.param({gameIds:i.favoriteCollection},!0):t;$.ajaxHtmlUpdate($("#games"),{url:t,type:"GET",data:{gameTabType:i.gameTabType,gameName:r,pageNumber:n}})};$(function(){$("body").addClass(i.bodyClass);i.$search=$("#SearchNameButton");i.$searchName=$("#SearchGameName");i.$searchName.keypress(function(n){n.which===13&&i.searchGames()});i.$search.click(function(){return i.searchGames()});i.initFavoriteButton();i.getGameList()})}return Object.defineProperty(n.prototype,"favoriteCollection",{get:function(){return $.localStorage.get("".concat(this.thirdPartyCode,"FavoriteCollection"))||[]},set:function(n){$.localStorage.set("".concat(this.thirdPartyCode,"FavoriteCollection"),n)},enumerable:!1,configurable:!0}),n.prototype.switchGameTabType=function(n){this.gameTabType=n;$(event.currentTarget).addClass("active").siblings().removeClass("active");this.$searchName.val("");this.searchGames()},n.prototype.gotoGame=function(n,t){var i=$.toTokenPath(globalVariables.GetUrl("GameLobby/".concat(this.thirdPartyCode,"Game?gameCode=").concat(n)));$.ajax2({url:i,type:"GET",success:function(n){if(n.IsSuccess)if(t==!0)location.href=n.DataModel;else{var i=new FullLayerParam;i.url=n.DataModel;i.isTitleVisible=!1;$.openFullLayer(i);$(".jqBackLink").show()}else alert(n.Message)}})},n.prototype.clickFavorite=function(n){var t=this.favoriteCollection,i=$(event.currentTarget),r=t.findIndex(function(t){return t===n});r>-1?(i.removeClass("active"),t.splice(r,1)):(i.addClass("active"),t.push(n));this.favoriteCollection=t;this.gameTabType===GameTabType.Favorite&&this.searchGames()},n.prototype.initFavoriteButton=function(){var n=this,t=$(".pt_game_list_wrap>ul>li>div");t.each(function(t,i){var r=$(i);n.favoriteCollection.includes(r.data("id"))&&r.find(".btn_favorite").addClass("active")})},n.prototype.getGameList=function(){var n=$.toTokenPath(globalVariables.GetUrl("GameLobby/Get".concat(this.thirdPartyCode,"GameList?"))),t=$(".jqGameList");$.ajaxHtmlUpdate(t,{url:n,type:"GET"})},n}();
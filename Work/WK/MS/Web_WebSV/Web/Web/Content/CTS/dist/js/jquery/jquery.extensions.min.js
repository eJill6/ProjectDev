var _this=this,LayerIconType;(function(n){n[n.Alert=0]="Alert";n[n.Ok=1]="Ok";n[n.Error=2]="Error";n[n.Tip=3]="Tip";n[n.Lock=4]="Lock";n[n.Disagree=5]="Disagree";n[n.Agree=6]="Agree"})(LayerIconType||(LayerIconType={}));var Timer=function(){function n(){this.timers=[]}return n.prototype.set=function(n,t,i){var u=this;t(n);var f=n*1e3,e=Date.now()+f,r=setInterval(function(){var f=Date.now(),n=Math.ceil((e-f)/1e3);n>-1?t(n):(u.clear(r),typeof i=="function"&&i())},1e3);return this.timers.push(r),r},n.prototype.clear=function(n){var t=this.timers.findIndex(function(t){return t===n});t>-1&&(clearInterval(n),this.timers.splice(t,1))},n.prototype.allClear=function(){this.timers.forEach(function(n){return clearInterval(n)});this.timers=[]},n}(),Modal=function(){function n(){}return n.prototype.openHtml=function(n){this.initModal();this.$modal.html(n)},n.prototype.open=function(n,t){this.initModal();$(n).tmpl(t).appendTo(this.$modal)},n.prototype.close=function(){this.$modal&&this.$modal.html("")},n.prototype.initModal=function(){this.$modal||(this.$modal=$('<div id="modal"><\/div>'),$("body").append(this.$modal))},n}(),MobilePersonalCenter=function(){function n(){var n=this;$(window).resize(function(){n.$personalCenter.is(":visible")&&n.$personalCenter.hide()})}return Object.defineProperty(n.prototype,"$personalCenter",{get:function(){return $("#m-personal-center")},enumerable:!1,configurable:!0}),n.prototype.toggle=function(n){this.$personalCenter.is(":hidden")?this.$personalCenter.fadeIn():this.$personalCenter.fadeOut();typeof n=="function"&&n()},n}(),AjaxUpdateMode;(function(n){n[n.Replace=1]="Replace";n[n.InsertBefore=2]="InsertBefore";n[n.InsertAfter=3]="InsertAfter"})(AjaxUpdateMode||(AjaxUpdateMode={})),function(n){n.fn.reverse=[].reverse;var t={image:"/Content/MerchantShared/validator/images/loading.gif",alternateText:"Loading",autoShow:!0};return n.fn.hideLoading=function(){n.fn.loading("hide")},n.fn.loading=function(i){var r={init:function(n){var i=jQuery.extend({},t,n);i.autoShow&&r.show.apply(this)},show:function(){var e=n("#loading"),o;if(e.length==1){e.show();return}var f="fixed",t=n("#progressImgage"),r=n("#maskOfProgressImage"),u;i&&i.aimDiv?(u=n(i.aimDiv).css("position","relative"),f="absolute"):u=n("body");t.length==0&&(o=globalVariables.WebRoot+"Content/CTS/2015/images/loading.gif",t=n("<img id='progressImgage'  src='"+o+"' />"),u.append(t));r.length==0&&(r=n('<div id="maskOfProgressImage"><\/div>').addClass("mask").addClass("hide"),u.append(r),r.css({position:f,top:"0",right:"0",bottom:"0",left:"0","z-index":"88888888","background-color":"#000000",display:"none"}));t.show().css({position:f,top:"40%",left:"50%","margin-top":function(){return t.height()/-2},"margin-left":function(){return t.width()/-2}});r.show().css("opacity","0.1")},hide:function(){var t=n("#loading");if(t.length==1){t.hide();return}n("#progressImgage").hide();n("#maskOfProgressImage").hide()},destroy:function(){n("#progressImgage").remove();n("#maskOfProgressImage").remove()}};return r[i]?r[i].apply(this,Array.prototype.slice.call(arguments,1)):typeof i!="object"&&i||r.init.apply(this,arguments),this},n.fn.onlyNumber=function(){var t=n(this);return t.keydown(function(n){var t=n.keyCode;t!==229&&(t<47||t>58)&&(t<96||t>105)&&t!==8&&n.preventDefault()}),t.keyup(function(){this.value=this.value.replace(/[^0-9]/g,"")}),this},n.fn.setEyeToPasswordInput=function(){var i=n(this),t=i.find("input[type='password']");return t.each(function(i){var r=n(t[i]),f=r.parent(),u=n('<a href="javascript:void(0)" class="icon_input_eye_close"><\/a>');u.click(function(){var n=r.attr("type")==="password";r.attr("type",n?"text":"password");u.removeClass().addClass(n?"icon_input_eye_open":"icon_input_eye_close")});f.append(u)}),this},n.fn.verifyCodes=function(){var t=n(this);return t.keyup(function(i){var r=n(i.currentTarget);i.keyCode===8?r.val()||t.each(function(i){var r=n(t[i]);if(!r.val())return n(t[i-1]).focus(),!1}):t.each(function(i){var r=n(t[i]);if(!r.val())return r.focus(),!1})}),this},n.fn.combineValues=function(){var i=this,r=n(this),t="";return r.each(function(r){t+=n(n(i)[r]).val()}),t},n.fn.setDatePicker=function(t){t===void 0&&(t={});var i=new Date,r=new Date(1990,i.getMonth()+1,i.getDate()),u=n.extend({months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],first_day_of_week:0,startDate:r,show_select_today:!1,show_clear_date:!1,show_icon:!1,default_position:"below",header_captions:{days:"Y年F",months:"Y",years:"Y1 - Y2"}},t);n(this).Zebra_DatePicker(u)},n.fn.updateDatePicker=function(t){t===void 0&&(t={});var i=n.extend({months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],first_day_of_week:0,show_select_today:!1,show_clear_date:!1,show_icon:!1,default_position:"below",header_captions:{days:"Y年F",months:"Y",years:"Y1 - Y2"}},t),r=n(this).data("Zebra_DatePicker");r.update(i)},n.fn.getCaptcha=function(t,i){var r=n(this);r.click(function(){n.ajax({url:globalVariables.GetUrl("Public/GenValidatorImg"),type:"POST",data:{actionTypeValue:t,identityToken:i},success:function(n){n.isSuccess&&r.html('<img src="data:image/png;base64,'+n.validatorImg+'" />')}})});r.click()},n.fn.tmplBinding=function(t,i,r){r===void 0&&(r=!0);r&&i.html("");n(this).tmpl(t).appendTo(i)},n.fn.countdownBtn=function(t,i){var r=n(this);r.html(i);r.addClass("disable");n.timer.set(t,function(n){return r.html(n+"s")},function(){return r.removeClass("disable").html(i)})},n.fn.sendAuthVerifyCode=function(t,i,r,u){var f=n(this);f.addClass("disable");n.ajax2({url:globalVariables.GetUrl("Authentication/SendAuthVerifyCode"),type:"POST",data:{webActionTypeValue:t,inputTypeValue:i,inputTypeData:r,moneyPassword:u},success:function(n){n.IsSuccess?f.countdownBtn(90,"获取验证码"):(alert(n.Message),f.removeClass("disable"))}})},n.fn.jqTooltip=function(){var t=n(this);return t.tooltip({position:{my:"center bottom",at:"center top"}}),n(".ui-helper-hidden-accessible").remove(),t.tooltip("instance")},_this}(jQuery);$.extend({refreshUserInfo:function(n){var t=n?$.ajax2:$.ajax;t({type:"POST",url:"/Home/GetRefreshBalanceInfo",success:function(n){$(".jqMainAvailableScores").text(n.AvailableScores);$(".jqMainFreezeScores").text(n.FreezeScores);$(".jqMainAllGain").text(n.AllGain);$.each(n.UserProductScores,function(n,t){$(".jqTPGameAvailableScores[productCode='"+t.ProductCode+"']").text(t.AvailableScoresText);$(".jqTPGameFreezeScores[productCode='"+t.ProductCode+"']").text(t.FreezeScoresText);$(".jqTPGameAllGain[productCode='"+t.ProductCode+"']").text(t.AllGain)})}})},toast:function(n){var i,r;n=$.extend({timeout:5e3},n);var e=$("body"),u=$($(".notification")[0]||$('<div class="notification"><\/div>')),t=$('<div class="list"><div>'),f=$('<div class="close"><\/div>').append($('<img src="/Content/CTS/2015/images/notification/ic_notification_close.svg" alt="">')),o=$("<div><\/div>").addClass("notify_icon").append($('<img src="'+n.icon+'" alt="">')).append($("<div><\/div>").addClass(["name",n.titleClass]).text(n.title)),s=$("<div><\/div>").addClass("notify_text").append($('<p class="break-all">'+n.message+"<\/p>"));t.append(f).append(o).append(s);u.prepend(t.hide().fadeIn(300));i=function(n){t.fadeOut(300,function(){return t.remove()});clearTimeout(n)};r=setTimeout(function(){return i(r)},n.timeout);f.click(function(){return i(r)});e.append(u)},transferToast:function(n,t){$.toast({title:n,titleClass:"transfer",message:t,icon:"/Content/CTS/2015/images/notification/ic_notification_transfer.jpg"})},betToast:function(n,t){$.toast({title:n,titleClass:"bet",message:t,icon:"/Content/CTS/2015/images/notification/ic_notification_bet.jpg"})},newsToast:function(n,t){$.toast({title:n,titleClass:"news",message:t,icon:"/Content/CTS/2015/images/notification/ic_notification_news.jpg"})},logOff:function(n){$.ajax({url:globalVariables.WebRoot+"Public/LogOff",type:"POST",success:function(t){localStorage.clear();localStorage.LoginFlag=0;n||(window.location.href=t)}})},modal:new Modal,ajaxHtmlUpdate:function(n,t){var i=$.extend({mode:AjaxUpdateMode.Replace},t);$.ajax2({url:i.url,type:i.type,data:i.data,success:function(t){switch(i.mode){case AjaxUpdateMode.InsertBefore:n.prepend(t);case AjaxUpdateMode.InsertAfter:n.append(t);default:n.html(t)}return}})},localStorage:{get:function(n){var t=localStorage.getItem(n);return t?JSON.parse(t):undefined},set:function(n,t){t&&localStorage.setItem(n,JSON.stringify(t))}},timer:new Timer,maskPhoneNumber:function(n){return(n=n||"",n.length<4)?n:n.length>6?""+n.slice(0,3)+"*".repeat(n.length-6)+n.slice(n.length-3):""+n[0]+"*".repeat(n.length-2)+n[n.length-1]},permissionCheck:function(n,t,i){$.ajax2({url:globalVariables.GetUrl("Account/GetUserAuthenticatorPermission"),type:"POST",data:{webActionTypeValue:n},success:function(n){t=t||function(){};i=i||function(){};n.IsAllowExecuted?t(n):i(n)}})},dropdownMenuSelectedEvent:function(n,t,i){var r=$(event.currentTarget).parent(".dropdown_menu"),u=r.prev(".dropdown_toggle");u.data("value",t).text(n);r.toggle();typeof i=="function"&&typeof t=="string"&&i(n,t)},isMobileSize:function(){return window.innerWidth<=768},mobilePersonalCenter:new MobilePersonalCenter,gotoHomePage:function(){return location.href=globalVariables.GetUrl("Home/Default")},contactCustomerService:function(){setTimeout(function(){var n=layer.open({title:"客服咨询",type:2,area:["1200px","800px"],content:[globalVariables.CustomerService,"no"],shade:0,shadeClose:!1});$.isMobileSize()&&layer.full(n)},10)},alert:function(n,t,i,r,u){t===void 0&&(t="确定");var f=[t];r&&f.push(r);layer.alert(n,{icon:LayerIconType.Alert,title:"温馨提示",btn:f,yes:function(n){typeof i=="function"&&i();layer.close(n)},btn2:u||function(){},closeBtn:!1})},tip:function(n,t){t===void 0&&(t=3e3);layer.msg(n,{time:t})},copyToClipboard:function(n,t){var i=document.createElement("textarea");i.value=n;document.body.appendChild(i);i.select();document.execCommand("copy");document.body.removeChild(i);typeof t=="function"&&t()},updateSpeedFinanceCount:function(){$.ajax2({url:globalVariables.GetUrl("Trade/GetUserProcessingSpeedFinanceCount"),type:"GET",success:function(n){if(n.data){var t=n.data.ProcessingSpeedRechargeCount,i=n.data.ProcessingSpeedWithdrawalCount;$(".dot>#speed-recharge, #fastrecharge>.dot>span").text(t?t>99?"99+":t:"");$(".dot>#speed-withdraw, #fastwithdrawal>.dot>span").text(i?i>99?"99+":i:"")}}})},dateStringFormat:function(n){return n.toLocaleDateString("zh-CN").replace(/\//g,"-")},isValidDateStringFormat:function(n){return/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/.test(n)},setStartAndEndDatePicker:function(n,t,i,r){var f,u;r||(f=new Date(0),r=f);i===null&&(i=!0);u=new Date;n.setDatePicker({onOpen:function(){$.datePickerOnOpen(n,r,t.val()?new Date(t.val().toString()):u)},readonly_element:i});t.setDatePicker({onOpen:function(){$.datePickerOnOpen(t,n.val()?new Date(n.val().toString()):r,u)},readonly_element:i})},datePickerOnOpen:function(n,t,i){var f=$.dateStringFormat(t),r=$.dateStringFormat(i),u=n.val();u||n.val(r);n.updateDatePicker({direction:[f,r],offset:[0,n.height()]});n.val(u)}});$.validator.passwordRule=function(n){var i=$(n),r=i.val(),s=r.trim().length!==r.length,f,t,u,e,o;return s?"密码前后不可输入空格":(f=i.attr("passwordValidPattern"),t=i.attr("placeholder"),t||(t=i.attr("errorMessage")),t||(t="format error"),u=i.attr("fnFormatErrorMsg"),typeof window[u]=="function"&&(t=window[u](t)),e=new RegExp(f),o=e.test(r),o||t)};$.validator.displayValidationMsgs=function(n,t){var i=$('<script type="text/template" type="text/x-jquery-tmpl" id="jqErrorMsgTemplate">\n                            <li>\n                                <span class="icon_input_error"><\/span>\n                                <span class="jqErrorMsg">${}<\/span>\n                            <\/li>\n                        <\/script>');$(n).html(i.tmpl(t)).toggle(i.tmpl(t)!=="")};$.validator.getValidationMessageConfig=function(){return{timely:3,rules:{},fields:{},messages:{},msgMaker:function(n){var t=$(n.element).parents(".label_input"),i;return t.find(".input_error").remove(),n.msg&&(i=$('<div class="input_error" key="'+n.key+'">\n                                        <li>\n                                            <span class="icon_input_error"><\/span>\n                                            <span>'+n.msg+"<\/span>\n                                        <\/li>\n                                     <\/div>"),t.append(i)),!1},msgHide:function(n){var t=$(n).attr("for"),i=$(n).parents(".label_input");i.find(".input_error[key='"+t+"']").remove()}}};$.validator.phoneRule=[/^1([3-9]{1})([0-9]{9})$/,"手机号码格式错误"];$.validator.usernameStrongCheckRule=[/^(?=.*[a-zA-Z])(?=.*\d)[A-Za-z\d]{6,16}$/,"请输入6-16位字符, 需包含英文字母和数字"];$.validator.passwordStrongCheckRule=[/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{6,16}$/,"请输入6-16位字符, 需包含英文字母和数字"];$.validator.passwordSpaceCheckRule=$.validator.passwordRule;$.validator.moneyPasswordStrongCheckRule=[/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{10,16}$/,"请输入10-16位字符，需包含大小写英文和数字"];$.validator.moneyPasswordSpaceCheckRule=$.validator.passwordRule;$.ajax2=$.ajax2||function(n,t){var i=n.complete,r=n.success,e=n.error,u=n.failedFunc,f=$(t||"#loading").show();return n.success=function(n,t,i){if(n.message&&!n.success){u?u(n):alert(n.message);return}r&&r(n,t,i)},n.complete=function(n,t){f.hide();i&&i(n,t)},$.ajax(n)};$.ajaxSetup({cache:!1,statusCode:{400:function(n){n.responseJSON&&alert(n.responseJSON.Message||n.responseJSON.message)},403:function(n){n.responseJSON&&n.responseJSON.isWebView?alert(n.responseJSON.Message||n.responseJSON.message):$.logOff()}},success:function(n){n&&!n.isAlert&&alert("操作成功")},error:function(n){n.status!==0}});window.alert=function(n,t){setTimeout(function(){layer.alert(n,{icon:0,title:"温馨提示",closeBtn:!1,shadeClose:!0},function(n){typeof t=="function"&&t();layer.close(n)})},10)};window.confirm=function(n,t,i){return setTimeout(function(){layer.confirm(n,{icon:3,title:"确认信息",shadeClose:!0,closeBtn:!1},function(n){typeof t=="function"&&t();layer.close(n)},function(n){typeof i=="function"&&i();layer.close(n)})},10),!0};window.generateImagePath=function(n){return"/Content/CTS/2015/images/"+n.replace("/","")};
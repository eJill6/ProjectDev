var GameTabType,ThirdPartyGameHall;(function(n){n[n.All=1]="All";n[n.Hot=2]="Hot";n[n.Favorite=3]="Favorite"})(GameTabType||(GameTabType={}));ThirdPartyGameHall=function(){function n(n,t){var i=this;this.gameLobbyType=n;this.bodyClass=t;this.gameTabType=GameTabType.All;this.searchGames=function(n,t){var f=$.toTokenPath(globalVariables.GetUrl("GameLobby/GetGameLobbyGameList")),e=$.trim(i.$searchName.val()),r=[],u=$(".jqGameList"),o=i;i.gameTabType===GameTabType.Favorite&&(r=i.favoriteCollection);n||u.empty();$.ajax2({url:f,type:"POST",data:{gameLobbyTypeValue:i.gameLobbyType,gameTabType:i.gameTabType,searchGameName:e,lastNo:t,filterNos:r},success:function(t){var i=$(t);n&&i.find(".jqNoResult").length>0||(u.append(i),o.initFavoriteButton())}})};$(function(){var n=!1,t;$("body").addClass(i.bodyClass);i.$search=$("#SearchNameButton");i.$searchName=$("#SearchGameName");i.$searchName.keypress(function(t){t.which===13&&i.searchGames(n)});i.$search.click(function(){return i.searchGames(n)});i.initFavoriteButton();i.searchGames(n);t=i;window.addEventListener("scroll",function(){if(window.innerHeight+window.scrollY>=document.body.offsetHeight){var n=$(".jqGamePanel:last").data("id");t.searchGames(!0,n)}})})}return Object.defineProperty(n.prototype,"favoriteCollection",{get:function(){return $.localStorage.get("".concat(this.gameLobbyType,"FavoriteCollection"))||[]},set:function(n){$.localStorage.set("".concat(this.gameLobbyType,"FavoriteCollection"),n)},enumerable:!1,configurable:!0}),n.prototype.switchGameTabType=function(n){this.gameTabType=n;$(event.currentTarget).addClass("active").siblings().removeClass("active");this.$searchName.val("");this.searchGames(!1)},n.prototype.gotoGame=function(n,t){var i=$.toTokenPath(globalVariables.GetUrl("GameLobby/LoginGameLobbyGame")),r={GameLobbyTypeValue:this.gameLobbyType,MobileGameCode:n};$.ajax2({url:i,type:"POST",data:r,success:function(n){if(!n.IsSuccess){alert(n.Message);return}if(t==!0)location.href=n.DataModel;else{var i=new FullLayerParam;i.url=n.DataModel;i.isTitleVisible=!1;$.openFullLayer(i);$(".jqBackLink").show()}}})},n.prototype.clickFavorite=function(n){var t=this.favoriteCollection,i=$(event.currentTarget),r=t.findIndex(function(t){return t===n});r>-1?(i.removeClass("active"),t.splice(r,1),this.gameTabType===GameTabType.Favorite&&i.closest("li").remove()):(i.addClass("active"),t.push(n));this.favoriteCollection=t},n.prototype.initFavoriteButton=function(){var n=this,t=$(".pt_game_list_wrap>ul>li>div");t.each(function(t,i){var r=$(i);n.favoriteCollection.includes(r.data("id"))&&r.find(".btn_favorite").addClass("active")})},n}();
@using JxBackendService.Model.Enums
@using Web.Extensions
@{
    ViewBag.PageTitle = "PT电游";
    Layout = "~/Views/Shared/_GameLobbyLayout.cshtml";
}

<script src="~/js/third-party-game-hall.js"></script>
<script src="~/js/jquery/jquery.counterup.min.js"></script>

<script type="text/javascript">
    var gameHall = new ThirdPartyGameHall("@GameLobbyType.IMPT.Value", "pt_bg");

    $(function () {
        var $numbers = $(".jqNumber");

        var fnRefreshJackpotAmount = function () {
            $.ajax({
                url: $.toTokenPath(globalVariables.GetUrl("GameLobby/GetIMPTJackpotAmount")),
                type: "GET",
                success: function (response) {

                    if (response.result && !isNaN(response.result)) {
                        let formatNumber = parseFloat(response.result).toFixed(2);
                        let numbers = formatNumber.toString().replace('.', '').padStart($numbers.length, "0");

                        if (numbers.length > $numbers.length) {
                            numbers = numbers.substr(numbers.length - $numbers.length);
                        }

                        $numbers.each(function (index, value) {
                            var $value = $(value), number = numbers[index];
                            if ($value.text() !== number) {
                                $value.text(number).counterUp({ delay: 1, time: 50 });
                            }
                        });
                    }
                }
            });
        };

        setInterval(function () {
            fnRefreshJackpotAmount();
        }, 60 * 2 * 1000);

        fnRefreshJackpotAmount();
    });
</script>

<div class="main simple">
    <div class="container">
        <div class="pt_wrap">
            <div class="pt_banner">
                <div class="pt_bouns">
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                    <li class="dot">,</li>
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                    <li class="dot">,</li>
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                    <li class="dot">.</li>
                    <li class="jqNumber">0</li>
                    <li class="jqNumber">0</li>
                </div>
            </div>
            <div class="pt_content">
                <div class="pt_list_bg">
                    <partial name="~/Views/ThirdParty/Partial/_SlotTabPartial.cshtml" />
                    <div class="jqGameList"></div>
                </div>
            </div>
        </div>
    </div>
</div>







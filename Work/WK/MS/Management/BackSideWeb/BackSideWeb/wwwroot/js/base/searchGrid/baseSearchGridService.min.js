var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),PagingRequestParam=function(){function n(){this.isChangePage=!1}return n}(),htmlGridSearchContent=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(htmlSearchContent),baseSearchGridService=function(n){function t(t,i){i===void 0&&(i={$contentBody:$("#jqGridContent"),$gridContentRoot:$("#jqContentRoot"),$gridContentFooter:$("#jqContentFooter"),$pagination:$(".jqPagination")});var r=n.call(this,t,i.$contentBody)||this;return r.searchFormSelector="#jqSearchFilterForm",r.formUtilService=new formUtilService,r.defaultPageSize=12,r.paginationSettingId=0,r.changePage=function(n,t){r.submitData.isChangePage=!0;r.submitData.pageNo=n;r.submitData.pageSize=t>0?t:r.defaultPageSize;r.doSearch(r.submitData)},r.htmlGridSearchContent=i,r}return __extends(t,n),t.prototype.getSubmitData=function(){return this.formUtilService.serializeObject($(this.searchFormSelector))},t.prototype.search=function(){this.submitData=this.getSubmitData();this.submitData.isChangePage=!1;this.submitData.pageNo=1;var n=this.getCurrentPageSize();this.submitData.pageSize=n>0?n:this.defaultPageSize;this.doSearch(this.submitData)},t.prototype.doRefreshSearchResult=function(){var n=this,u=n.htmlGridSearchContent.$gridContentRoot.is(":visible");if(u){var t=n.htmlGridSearchContent.$pagination.find(".jqPageNoLink.active"),i=1,r=this.defaultPageSize;t.length==1&&(i=Number(t.text().trim()),r=n.getCurrentPageSize());n.changePage(i,r)}},t.prototype.getHtmlContents=function(){return this.htmlGridSearchContent},t.prototype.updateGridContent=function(n,t,i){var r=t,u=$(n),f=u.find(".jqBody"),e=f.html(),o,s;f.find("tr").length==0&&(o=r.$contentBody.closest("table"),s=i,e=s.GetNoSearchResultHtml(o));r.$contentBody.html(e);r.$gridContentFooter.html(u.find(".jqFooter").html());r.$pagination.html(u.find(".jqPagination").html())},t.prototype.GetNoSearchResultHtml=function(n){var r=n.find("th").length,t=$("<td/>"),i;return t.attr("colspan",r).text("查无资料"),i=$("<tr/>").append(t),i[0].outerHTML},t.prototype.doAfterSearch=function(n){var t=n;t.$gridContentRoot.show();$(".jqHoverData").hoverData()},t.prototype.validateSubmitData=function(){var t=n.prototype.validateSubmitData.call(this),i;return t&&this.submitData.isChangePage===!1&&(i=$(this.searchFormSelector),i.length==1&&(t=i.valid())),t},t.prototype.export=function(){if(this.submitData=this.getSubmitData(),this.validateSubmitData()){this.submitData.isChangePage=!1;this.submitData.pageNo=1;this.submitData.pageSize=100001;var n=this.formatDateTimeString(new Date),t=$("h1").text()+"_"+n;$.ajax2({url:this.searchApiUrlSetting.exportApiUrl,type:"POST",data:this.submitData,xhrFields:{responseType:"blob"},success:function(n){(new fileDownloadService).download(n,t)}})}},t.prototype.formatDateTimeString=function(n){var t=n.getFullYear(),i=n.getMonth()+1,r=n.getDate(),u=n.getHours(),f=n.getMinutes(),e=i.toString().padStart(2,"0"),o=r.toString().padStart(2,"0"),s=u.toString().padStart(2,"0"),h=f.toString().padStart(2,"0");return"".concat(t).concat(e).concat(o).concat(s).concat(h)},t.prototype.openView=function(n){var t=n.url,i,r,u;n.keyContent&&(t=t.concat("?keyContent=".concat(encodeURIComponent(n.keyContent))));i=" ";n.title&&(i=n.title);r={title:i,url:t,area:n.area};u=new layerService;u.open(r)},t.prototype.getCurrentPageSize=function(){return Number($("#jqPageSize_".concat(this.paginationSettingId)).val())},t}(baseSearchService),openViewSetting=function(){function n(){}return n}();
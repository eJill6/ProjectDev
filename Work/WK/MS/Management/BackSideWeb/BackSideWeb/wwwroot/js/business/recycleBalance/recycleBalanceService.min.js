var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),recycleBalanceService=function(n){function t(t,i){i===void 0&&(i={$contentBody:$("#jqGridContent"),$gridContentRoot:$("#jqContentRoot"),$gridContentFooter:$("#jqContentFooter"),$pagination:$(".jqPagination"),$msUserContentBody:$("#jqMsUserGridContent"),$msUserGridContentRoot:$("#jqMsUserContentRoot"),userIdSelector:".jqUserId"});var r=n.call(this,t,i)||this;return r.productRequestMap={},r.recycleBalanceSearchContent=i,r}return __extends(t,n),t.prototype.initRoutingKey=function(n){this.routingKey=n},t.prototype.updateGridContent=function(t,i,r){var o;n.prototype.updateGridContent.call(this,t,i,r);var f=$(t).find(".jqMsUserBody"),e=f.html(),u=i;f.find(u.userIdSelector).text()===""&&(o=u.$msUserContentBody.closest("table"),e=n.prototype.GetNoSearchResultHtml.call(this,o));u.$msUserContentBody.html(e)},t.prototype.doAfterSearch=function(t,i){n.prototype.doAfterSearch.call(this,t,i);var r=t;r.$msUserGridContentRoot.show()},t.prototype.recycleAllBalance=function(n){var t=$(n),i=t.data("url"),r=t.data("userid");this.doRecycleBalance(i,r,"","所有")},t.prototype.recycleSingleProductBalance=function(n){var e=this,t=$(n),i=t.data("url"),r=t.data("userid"),u=t.data("productcode"),f=t.data("productname");this.doRecycleBalance(i,r,u,f)},t.prototype.doRecycleBalance=function(n,t,i,r){var f=this,u=this;window.confirm("确定协助用户回收".concat(r,"帐户余额吗？"),function(){var o=!0,r=f.generateGUID(),e;$.each($(".jqProductRow"),function(n,t){var f=$(t).attr("productCode");(i===""||i===f)&&(u.productRequestMap[f]=r,u.setOperationResultHtml(f,""))});e={userId:t,productCode:i,routingKey:u.routingKey,requestId:r};$.ajax2({url:n,type:"POST",data:e,success:function(n){new baseReturnModelService(n).responseHandler(function(){},o)}})})},t.prototype.UpdateOperationContent=function(n){var t=this.productRequestMap[n.ProductCode];n.RequestId===t&&this.appendOperationResultHtml(n.ProductCode,n.Summary)},t.prototype.UpdateMiseLiveBalance=function(){var n=globalVariables.GetUrl("RecycleBalance/GetMiseLiveBalance"),t=$(this.recycleBalanceSearchContent.userIdSelector).text();$.ajax({url:n,type:"GET",data:{userId:t},success:function(n){$(".jqMiseLiveGameBalance").text(n)}})},t.prototype.UpdateTPGameBalance=function(n){var t=globalVariables.GetUrl("RecycleBalance/GetTPGameBalance"),i=$(this.recycleBalanceSearchContent.userIdSelector).text();$.ajax({url:t,type:"GET",data:{userId:i,productCode:n},success:function(t){$(".jqProductRow[productCode='".concat(n,"'] .jqTPGameBalance")).text(t)}})},t.prototype.generateGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})},t.prototype.appendOperationResultHtml=function(n,t){var r=this.getJqOperationResult(n),i=r.html();i!==""&&(i+="<br/>");i+=t;r.html(i)},t.prototype.setOperationResultHtml=function(n,t){var i=this.getJqOperationResult(n);i.html(t)},t.prototype.getJqOperationResult=function(n){return this.recycleBalanceSearchContent.$contentBody.find("tr[productcode='".concat(n,"']")).find(".jqOperationResult")},t}(baseSearchGridService),TransferMessage=function(){function n(){}return n}(),recycleBalanceHtmlGridSearchContent=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(htmlGridSearchContent);
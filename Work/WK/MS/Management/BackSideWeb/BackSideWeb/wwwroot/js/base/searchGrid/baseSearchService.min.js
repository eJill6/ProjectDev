var htmlSearchContent=function(){function n(){}return n}(),intervalSetting=function(){function n(){}return n}(),baseSearchService=function(){function n(n,t){t===void 0&&(t={$contentBody:$("#jqContent")});this.validatePairDateFieldSettings=[];this.searchApiUrlSetting=n;this.htmlSearchContent=t;this.intervalSetting=new intervalSetting}return n.prototype.search=function(){this.submitData=this.getSubmitData();this.doSearch(this.submitData)},n.prototype.refreshSearchResult=function(n){if(this.clearIntervalId(),typeof n=="number"&&n!==0){var t=this;this.intervalSetting.seconds=n;this.intervalSetting.id=setInterval(function(){t.doRefreshSearchResult()},this.intervalSetting.seconds*1e3)}},n.prototype.doRefreshSearchResult=function(){this.search()},n.prototype.clearIntervalId=function(){this.intervalSetting.id!==undefined&&(clearInterval(this.intervalSetting.id),this.intervalSetting.id=undefined)},n.prototype.doSearch=function(n){if(!this.validateSubmitData()){this.submitData=this.lastSubmitData;return}var i=this.getHtmlContents(),r=this.updateGridContent,u=this.doAfterSearch,t=this;$.ajax2({url:this.searchApiUrlSetting.searchApiUrl,type:"POST",data:n,success:function(n){t.lastSubmitData=t.submitData;r(n,i,t);u(i,t);t.refreshSearchResult(t.intervalSetting.seconds)}})},n.prototype.getHtmlContents=function(){return this.htmlSearchContent},n.prototype.updateGridContent=function(n,t){t.$contentBody.html(n)},n.prototype.validateSubmitData=function(){for(var i,n=0,t=this.validatePairDateFieldSettings;n<t.length;n++)if(i=t[n],!this.validatePairDateField(i))return!1;return!0},n.prototype.validatePairDateField=function(n){var t=n[0].val().toString(),i=n[1].val().toString(),r=n[2],u=n[3],f,e;return!this.validateSingleDateField(t,r,u)||!this.validateSingleDateField(i,r,u)?!1:(f=new Date(t),e=new Date(i),f>e)?(alert("日期格式不符"),!1):!0},n.prototype.validateSingleDateField=function(n,t,i){if(n&&!$.isValidDateStringFormat(n)||!t&&!n)return alert("日期格式不符"),!1;var u=i?i.setHours(0,0,0,0):new Date(0).setHours(0,0,0,0),f=(new Date).setHours(0,0,0,0),r=new Date(n).setHours(0,0,0,0);return r<u||r>f?(alert("输入的日期已超过可搜查的时间范围"),!1):!0},n.prototype.initStartAndEndDatePicker=function(n,t,i,r){$.setStartAndEndDatePicker(n,t,!1,r);n.attr("defaultValue",n.val().toString());t.attr("defaultValue",t.val().toString());this.setValidatePairDateFieldSettings(n,t,i,r)},n.prototype.setValidatePairDateFieldSettings=function(n,t,i,r){this.validatePairDateFieldSettings.push([n,t,i,r])},n.prototype.initDefaultDatePicker=function(n){var t=this;$.each($(".jqStartDate"),function(i,r){var u=$(r),f=$(r).attr("endDateId"),e=$("#".concat(f));t.initStartAndEndDatePicker(u,e,n)})},n}();
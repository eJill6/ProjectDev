@model AdminBookingRefundDetail
@using MS.Core.MMModel.Models.AdminBooking;

<style>
    table {
        border-collapse: collapse;
    }
</style>
<input type="hidden" id="RefundId" name="RefundId" value="@Model.RefundId">
<input type="hidden" value="@Model.Status" name="hiddenStatus" id="hiddenStatus" />
<table>
    <tr>
        <td>预约单ID</td>
        <td>@Model.BookingId</td>
    </tr>
    <tr>
        <td>会员ID</td>
        <td>@Model.UserId</td>
    </tr>
    <tr></tr>
    <tr>
        <td>联系方式</td>
        <td>@Model.Contact</td>
    </tr>
    <tr>
        <td>帖子ID</td>
        <td>@Model.PostId</td>
    </tr>
    <tr>
        <td>支付类型</td>
        <td>@Model.PaymentTypeText</td>
    </tr>
    <tr>
        <td>发帖者身份</td>
        <td>@Model.UserIdentityText</td>
    </tr>
    <tr>
        <td>支付钻石</td>
        <td>@Model.PaymentMoneyText</td>
    </tr>
    <tr>
        <td>实际支付钻石</td>
        <td>@Model.ActualPaymentMoneyText</td>
    </tr>
    <tr></tr>
    <tr>
        <td>申请理由</td>
        <td>@Model.ReasonTypeText</td>
    </tr>
    <tr>
        <td>申请时间</td>
        <td>@Model.ApplyTimeText</td>
    </tr>
    <tr>
        <td>详情描述</td>
        <td>@Model.Reason</td>
    </tr>
    <tr>
        <td>截图证据</td>
        <td>
            <div>
                @{
                    foreach (var pic in Model.ProofPics)
                    {
                            <img class="img" src="@pic" />
                    }
                }
            </div>
        </td>
    </tr>
    <tr>
        <td>审核</td>
        <td>

            <input type="radio" id="audit_approved" name="Status" value="1" style="-webkit-appearance: radio;">
            <label for="audit_approved">通过</label>
            <br>
            <input type="radio" id="audit_rejected" name="Status" value="2" style="-webkit-appearance: radio;">
            <label for="audit_rejected">未通过</label>
            <p style="color:#d9001b">※通过送出将退款钻石，请小心使用。</p>
        </td>
    </tr>
    <tr>
        <td>未通过理由</td>
        <td>
            <textarea rows="3" rows="10" cols="30" style="border: 1px solid black;" id="Memo" name="Memo"></textarea>
            <p style="color:#d9001b">
                ※选填，选择未通过时启用，填写内容于用户端显示，请谨慎用字。
            </p>
        </td>
    </tr>
</table>
<script>
    $("div .img").each(async function () {
        var src = await new decryptoService().fetchSingleDownload($(this).attr("src"));
        $(this).attr("src", src);
    });

    $(function () {
        var status = $("#hiddenStatus").val();
        if (status === "1") {
            $("#Memo").val("");
            $("#Memo").prop("disabled", true);
        }
        $("input[name='Status']").change(function () {
            var selectedStatus = $(this).val();
            if (selectedStatus === "1") {
                $("#Memo").val("");
                $("#Memo").prop("disabled", true);
            }else{
                $("#Memo").prop("disabled", false);
            }
        });
    })
</script>